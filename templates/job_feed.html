{% raw %}
<!DOCTYPE html>
<html ng-app="todoApp" lang="en">
  <head>
    <title>stenoConnect Job Feed</title><meta charset=utf-8 />
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" media="screen" href="/static/dist/css/custom.css" />
    <link rel="stylesheet" href="/static/dist/css/todo.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
    <script src="/static/dist/js/components.js"></script>
    <script src="/static/dist/js/app.js"></script>
    <script src="/static/dist/js/todo.js"></script>
    <script src="/static/dist/js/custom.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.js"></script>

    <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
  </head>
  <body>
		<header id="header"></header>
		<script type="text/javascript">
		  $('#header').load('header');
	  </script>
    <div id="wrap">
  		<div id="main" class="container">
        <div ng-controller="TodoListController as todoList">
  			  <div class="row">
            <div class="col-xs-12 pull-right">
              <a class="pull-right green" href="/complete_job/{{todoList.job_id}}"><span class="glyphicon glyphicon-ok lead"></span><small>Mark Complete</small></a>
            </div>
          </div>
          <div class="row">
            <div class="col-xs-12 col-md-8 col-md-push-4 formBG">
              <div>
                <h2 ng-hide="editing">{{todoList.jobtitle}}<small> is due {{todoList.jobduedate}}.</small></h2>
              </div>
              <h4>
                <span ng-hide="editing">{{todoList.jobdesc}}</span>
                <a ng-click="editing = true" ng-hide="editing" href=""><span class="glyphicon glyphicon-pencil"></span></a>
              </h4>
              <form name="editJob" ng-show="editing" ng-submit="editing = false">
                <div class="row">
                  <div class="col-xs-6">
                    <input class="h2" type="text" ng-model="todoList.jobtitle" value={{todoList.jobtitle}} ng-required/>
                  </div>
                  <div class="col-xs-2">
                    <h2><small>is due</small></h2>
                  </div>
                  <div class="col-xs-4 top-padding27">
                    <input type="date" ng-model="todoList.jobduedate" value="{{todoList.jobduedate}}" ng-required/>
                  </div>
                </div>
                <div class="row">
                  <div class="col-xs-10">
                    <textarea class="h4" type="text" rows="2" cols="65" ng-model="todoList.jobdesc" value="{{todoList.jobdesc}}" ng-required/></textarea>
                  </div>
                  <div class="col-xs-2 top-padding">
                    <input class="btn btn-basic btn-sm" type="submit" value="Save">
                  </div>
                </div>
              </form>
              <form class="top-padding" ng-submit="todoList.addTodo()">
                <div class="row">
                  <div class="col-sm-12 col-md-10">
                    <textarea class="form-control" type="text" ng-model="todoList.todoText" rows="2" placeholder="Add message here"></textarea>
                  </div>
                  <div class="col-sm-12 col-md-2">
                    <input class="btn btn-primary btn-md" type="submit" value="Add">
                  </div>
                </div>
              </form>
              <h4>There are {{todoList.todos.length}} messages.</h4>
                <ul class="unstyled">
                  <li ng-repeat="todo in todoList.todos | orderBy:'-time'">
                    <label class="feed">
                      <p>
                        <div class="row">
                          <div class="col-xs-12 pull-right">
                            <a href="#"><span class="glyphicon glyphicon-mark"></span></a>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-xs-2">
                            <img class="img-responsive img-thumbnail img-circle" src={{todo.image}} alt="pic">
                          </div>
                          <div class="col-xs-2">
                            {{todo.time.fromNow()}}
                          </div>
                          <div class="col-xs-7">
                            {{todo.text}}
                          </div>
                          <div class="col-xs-1 pull-right align-middle">
                            <a href="mailto:someone@example.com?Subject={{todoList.jobtitle}}:%20New%20Message" target="_top"><span class="glyphicon glyphicon-envelope"></span></a>
                          </div>
                        </div>
                      </p>
                    </label>
                  </li>
                </ul>
              </div>
              <div class="col-xs-12 col-md-pull-8 col-md-4">
                <p class="row">
                  <div class="col-xs-12">
                    <div class="panel-group">
                      <div class="panel panel-default">
                        <div class="panel-heading">
                          <h4 class="panel-title">
                            <div class="row">
                              <div class="col-xs-2">
                                <a data-toggle="collapse" href="#collapse1"><span class="glyphicon glyphicon-collapse-down"></span></a>
                              </div>
                              <div class="col-xs-10">
                                <strong class="h4 text-uppercase">File List</strong>
                              </div>
                            </div>
                          </h4>
                        </div>
                        <div id="collapse1" class="panel-collapse collapse">
                          <div class="panel-body">
                            <ul class="unstyled">
                              <li>
                                  <p>
                                    <div class="row break-word">
                                      <div class="col-xs-8">
                                        File Name
                                      </div>
                                      <div class="col-xs-4 small">
                                        Last Modified
                                      </div>
                                    </div>
                                  </p>
                              </li>
                              <li ng-repeat="file in todoList.files">
                                <label class="block">
                                  <p>
                                    <div class="row break-word">
                                      <div class="col-xs-8">
                                        <u><a href="/dl_file/{{todoList.uuid}}/{{todoList.job_id}}/{{file}}" target="_blank">{{file}}</a></u>
                                      </div>
                                      <div class="col-xs-4 pull-right">
                                        <small>{{todoList.jobduedate}}</small>
                                      </div>
                                    </div>
                                  </p>
                                </label>
                              </li>
                            </ul>
                          </div>
                          <div class="panel-footer text-uppercase"><a data-toggle="modal" data-target="#uploadFiles">load more files</a></div>
                        </div>
                      </div>
                    </div>
                  </div>
                </p>
              </div>
            </div>
      </div>
    </div>
  </div>
  <footer class="footer"></footer>
  <script type="text/javascript">
   $('.footer').load('footer');
  </script>

  <!-- Modal -->
  <div class="modal fade" id="uploadFiles" role="dialog">
    <div class="modal-dialog">

      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">File Upload</h4>
        </div>
        <div class="modal-body uploadFiles">
          <h1>Upload or overwrite files!</h1>
        </div>
        <script type="text/javascript">
          $('.uploadFiles').load('uploadfiles');
        </script>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>

    </div>
  </div>
 </body>
</html>
{% endraw %}
